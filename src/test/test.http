### 1) Haal JWT-token op via Keycloak (PASSWORD GRANT)
POST http://localhost:8180/realms/moko/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type = password &
client_id = user-service &
client_secret = ZmXSd2mIzB6hsLrybeD3gH0c11vPwrej &
username = mathias &
password = loginmathias &
scope = openid

> {%
    client.global.set("access_token", response.body.access_token);
%}

### 1B) Haal JWT-token op via Keycloak (PASSWORD GRANT)
POST http://localhost:8180/realms/moko/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type = password &
client_id = user-service &
client_secret = ZmXSd2mIzB6hsLrybeD3gH0c11vPwrej &
username = kaj &
password = loginkaj &
scope = openid

> {%
    client.global.set("kaj_token", response.body.access_token);
%}


### 2) GET /api/profiles/me
GET http://localhost:8080/api/profiles/me
Authorization: Bearer {{access_token}}

### 3) PATCH /api/profiles/me (profiel updaten)
PATCH http://localhost:8080/api/profiles/me
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "username": "mathias-updated",
  "email": "mathias.updated@kdg.be"
}

### 4) GET /api/profiles/{id} (opvragen profiel via ID)
GET http://localhost:8080/api/profiles/11111111-1111-1111-1111-111111111111
Authorization: Bearer {{access_token}}

### 5) Ongeldig: PATCH zonder auth (verwacht 401)
PATCH http://localhost:8080/api/profiles/me
Content-Type: application/json

{
  "username": "should-fail",
  "email": "fail@mail.be"
}

### 6) Ongeldig: PATCH invalid email (verwacht 400)
PATCH http://localhost:8080/api/profiles/me
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "username": "invalid-test",
  "email": "not-an-email"
}

### 7) opvragen library
GET http://localhost:8080/api/library/me
Authorization: Bearer {{access_token}}


### Library filteren op zoekterm "ch"
GET http://localhost:8080/api/library/me?filter=ch
Authorization: Bearer {{access_token}}

### Alleen favourited games
GET http://localhost:8080/api/library/me?favourite=true
Authorization: Bearer {{access_token}}

### Sorteren op aankoopdatum (nieuw â†’ oud)
GET http://localhost:8080/api/library/me?order=purchased_desc
Authorization: Bearer {{access_token}}

### Max 5 games teruggeven
GET http://localhost:8080/api/library/me?limit=1
Authorization: Bearer {{access_token}}

### Combinatie (filter + favourite + sort)
GET http://localhost:8080/api/library/me?filter=ta&favourite=true&order=title_desc&limit=10
Authorization: Bearer {{access_token}}

### getting my achievements
GET http://localhost:8080/api/achievements/me
Authorization: Bearer {{access_token}}

### getting a users achievements
GET http://localhost:8080/api/achievements/cf36d3e1-a1e0-4c18-89eb-95fa76fc81ee
Authorization: Bearer {{access_token}}

### mark a game as favourite
PATCH http://localhost:8080/api/library/00000000-0000-0000-0000-000000000002/favourite
Authorization: Bearer {{access_token}}

### unfavourite a game
PATCH http://localhost:8080/api/library/00000000-0000-0000-0000-000000000002/unfavourite
Authorization: Bearer {{access_token}}

### Health check
GET http://localhost:8080/actuator/health

### get preferences of user
GET http://localhost:8080/api/profiles/me/preferences
Authorization: Bearer {{access_token}}

### patch preferences
PATCH http://localhost:8080/api/profiles/me/preferences
Authorization: Bearer {{access_token}}
Content-Type: application/json

{
  "receiveEmail": false,
  "social": false,
  "achievement": true,
  "commerce": true,
  "chat": true
}

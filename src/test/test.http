### 1) JWT Token ophalen voor OWNER (mathias)
POST http://localhost:8180/realms/moko/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type = password &
client_id = session-service &
client_secret = hWzsxSaXWJtEtPkrhIoLByKFEMVuczUu &
username = mathias &
password = loginmathias &
scope = openid

> {%
    client.global.set("owner_token", response.body.access_token);
%}


### 2) JWT Token ophalen voor TWEEDE GEBRUIKER (kaj)
POST http://localhost:8180/realms/moko/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type = password &
client_id = session-service &
client_secret = hWzsxSaXWJtEtPkrhIoLByKFEMVuczUu &
username = kaj &
password = loginkaj &
scope = openid

> {%
    client.global.set("other_token", response.body.access_token);
%}


### 3) POST Create Lobby (owner = mathias)
POST http://localhost:8081/api/lobbies
Authorization: Bearer {{owner_token}}
Content-Type: application/json

{
  "gameId": "00000000-0000-0000-0000-000000000005"
}

> {%
    client.global.set("lobby_id", response.body.id);
%}

###
### 4) GET Lobby by ID
GET http://localhost:8081/api/lobbies/{{lobby_id}}
Authorization: Bearer {{owner_token}}


### 5) INVALID - Missing GameId (400)
POST http://localhost:8081/api/lobbies
Authorization: Bearer {{owner_token}}
Content-Type: application/json

{
  "gameId": null
}


### 6) GET Lobby - Not Found (404)
GET http://localhost:8081/api/lobbies/11111111-1111-1111-1111-111111111111
Authorization: Bearer {{owner_token}}


### 7) CLOSE Lobby (owner only)
POST http://localhost:8081/api/lobbies/{{lobby_id}}/close
Authorization: Bearer {{owner_token}}


### 8) INVALID - Close already closed lobby (400)
POST http://localhost:8081/api/lobbies/{{lobby_id}}/close
Authorization: Bearer {{owner_token}}


### 9) PUT /settings â€“ update maxPlayers (owner only)
PUT http://localhost:8081/api/lobbies/{{lobby_id}}/settings
Authorization: Bearer {{owner_token}}
Content-Type: application/json

{
  "maxPlayers": 5
}


### 10) INVALID - Update settings on CLOSED lobby (400)
PUT http://localhost:8081/api/lobbies/{{lobby_id}}/settings
Authorization: Bearer {{owner_token}}
Content-Type: application/json

{
  "maxPlayers": 3
}


### 11) INVALID - Non-owner (kaj) tries to close lobby (403/400 depending on domain rule)
POST http://localhost:8081/api/lobbies/{{lobby_id}}/close
Authorization: Bearer {{other_token}}


### 12) INVALID - Non-owner (kaj) tries to update settings (403/400)
PUT http://localhost:8081/api/lobbies/{{lobby_id}}/settings
Authorization: Bearer {{other_token}}
Content-Type: application/json

{
  "maxPlayers": 8
}


### 13) GET All Lobbies
GET http://localhost:8081/api/lobbies
Authorization: Bearer {{owner_token}}
